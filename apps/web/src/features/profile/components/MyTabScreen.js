import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import { useState } from 'react';
import { Screen } from '@qupid/core';
import { ChevronRightIcon } from '@qupid/ui';
import { useUserProfile } from '../../../shared/hooks/api/useUser';
import { useAppStore } from '../../../shared/stores/useAppStore';
const TossToggle = ({ value, onToggle }) => (_jsx("button", { onClick: (e) => {
        e.stopPropagation();
        onToggle();
    }, className: `relative inline-flex items-center h-[30px] w-[50px] rounded-full transition-colors duration-300 ease-in-out focus:outline-none`, style: { backgroundColor: value ? 'var(--primary-pink-main)' : '#E5E8EB' }, children: _jsx("span", { className: `inline-block w-[26px] h-[26px] transform bg-white rounded-full transition-transform duration-300 ease-in-out shadow-sm`, style: { transform: value ? 'translateX(22px)' : 'translateX(2px)' } }) }));
const SettingItem = ({ icon, title, subtitle, rightComponent, onClick, dangerous = false }) => {
    const isClickable = !!onClick;
    const Component = isClickable ? 'button' : 'div';
    return (_jsxs(Component, { onClick: onClick, className: `flex items-center w-full h-[56px] px-5 bg-white ${isClickable ? 'cursor-pointer hover:bg-gray-50' : ''}`, children: [_jsxs("div", { className: "flex items-center flex-1", children: [_jsx("span", { className: "text-2xl w-6 text-center", children: icon }), _jsxs("div", { className: "ml-4 text-left", children: [_jsx("p", { className: `text-base font-medium ${dangerous ? 'text-[var(--warning-orange)]' : 'text-[#191F28]'}`, children: title }), subtitle && _jsx("p", { className: "text-xs text-[#8B95A1]", children: subtitle })] })] }), _jsx("div", { className: "flex items-center space-x-2 text-[#8B95A1]", children: rightComponent })] }));
};
const SectionContainer = ({ title, children, className }) => (_jsxs("div", { className: `mt-4 ${className}`, children: [title && _jsx("h3", { className: "px-5 pb-1 text-base font-bold text-[#8B95A1]", children: title }), _jsx("div", { className: "bg-white rounded-2xl border border-[#F2F4F6] overflow-hidden divide-y divide-[#F2F4F6]", children: children })] }));
const MyTabScreen = ({ onNavigate, onLogout, isGuest }) => {
    const { currentUserId } = useAppStore();
    const { data: userProfile } = useUserProfile(currentUserId || '');
    // 로딩 중이거나 데이터가 없을 때의 기본값
    const defaultProfile = { name: '사용자', user_gender: 'male' };
    const profile = userProfile || defaultProfile;
    const [practiceNotification, setPracticeNotification] = useState(true);
    // const [analysisDisplay] = useState(true);
    const [darkMode, setDarkMode] = useState(false);
    const initial = profile.name.charAt(0).toUpperCase();
    return (_jsxs("div", { className: "flex flex-col h-full w-full bg-[#F9FAFB]", children: [_jsx("header", { className: "flex-shrink-0 p-4 pt-5 bg-white", children: _jsx("h1", { className: "text-2xl font-bold text-[#191F28]", children: "MY" }) }), _jsxs("main", { className: "flex-1 overflow-y-auto p-4 pb-24", children: [_jsxs("div", { className: "h-[120px] rounded-2xl p-5 flex items-center", style: { background: 'linear-gradient(135deg, #FDF2F8, #EBF2FF)' }, children: [_jsx("div", { className: "w-16 h-16 rounded-full bg-[#F093B0] flex items-center justify-center text-white text-3xl font-bold", children: initial }), _jsxs("div", { className: "ml-4 flex-1", children: [_jsxs("p", { className: "font-bold text-xl text-[#191F28]", children: [isGuest ? '게스트' : profile.name, isGuest && _jsx("span", { className: "ml-2 text-xs text-[#F093B0]", children: "(\uC784\uC2DC)" })] }), _jsx("p", { className: "font-medium text-sm text-[#8B95A1]", children: isGuest ? '체험 중' : 'Level 3 · 대화 중급자' }), !isGuest && (_jsx("div", { className: "mt-1.5 h-1 w-full bg-white/30 rounded-full", children: _jsx("div", { className: "h-1 rounded-full bg-[#F093B0]", style: { width: '75%' } }) }))] }), !isGuest && (_jsx("button", { onClick: () => onNavigate(Screen.ProfileEdit), className: "h-8 px-4 rounded-lg bg-white/20 border border-white/30 text-[#4F7ABA] text-sm font-bold", children: "\uD3B8\uC9D1" })), isGuest && (_jsx("button", { onClick: () => onNavigate('SIGNUP'), className: "h-8 px-4 rounded-lg bg-[#F093B0] text-white text-sm font-bold", children: "\uD68C\uC6D0\uAC00\uC785" }))] }), isGuest && (_jsxs("div", { className: "bg-[#FFF5F7] border border-[#FFE0E6] rounded-2xl p-4", children: [_jsx("p", { className: "text-sm font-bold text-[#F093B0] mb-2", children: "\uD83C\uDF81 \uAC8C\uC2A4\uD2B8 \uCCB4\uD5D8 \uC911" }), _jsxs("p", { className: "text-xs text-[#8B95A1] mb-3", children: ["\uB0A8\uC740 \uB300\uD654 \uD69F\uC218: ", Math.max(0, 3 - parseInt(localStorage.getItem('guestChatCount') || '0')), "/3\uD68C"] }), _jsx("button", { onClick: () => onNavigate('SIGNUP'), className: "w-full h-10 bg-[#F093B0] text-white rounded-lg font-bold text-sm", children: "\uD68C\uC6D0\uAC00\uC785\uD558\uACE0 \uBAA8\uB4E0 \uAE30\uB2A5 \uC0AC\uC6A9\uD558\uAE30" })] })), _jsxs(SectionContainer, { title: "\uD559\uC2B5 \uC124\uC815", children: [_jsx(SettingItem, { icon: "\uD83D\uDCDA", title: "\uD559\uC2B5 \uBAA9\uD45C \uC124\uC815", onClick: () => onNavigate(Screen.LearningGoals), rightComponent: _jsxs(_Fragment, { children: [_jsx("span", { className: "text-sm font-medium", children: "\uC77C 3\uD68C \uB300\uD654" }), _jsx(ChevronRightIcon, { className: "w-4 h-4" })] }) }), _jsx(SettingItem, { icon: "\uD83C\uDFAF", title: "\uAD00\uC2EC \uBD84\uC57C \uC218\uC815", onClick: () => onNavigate(Screen.ProfileEdit), rightComponent: _jsxs(_Fragment, { children: [_jsx("span", { className: "text-sm font-medium", children: "\uAC8C\uC784, \uC601\uD654 \uC678 3\uAC1C" }), _jsx(ChevronRightIcon, { className: "w-4 h-4" })] }) }), _jsx(SettingItem, { icon: "\u23F0", title: "\uC5F0\uC2B5 \uC2DC\uAC04 \uC54C\uB9BC", rightComponent: _jsx(TossToggle, { value: practiceNotification, onToggle: () => setPracticeNotification(v => !v) }) })] }), _jsxs(SectionContainer, { title: "\uC571 \uC124\uC815", children: [_jsx(SettingItem, { icon: "\uD83D\uDD14", title: "\uC54C\uB9BC \uC124\uC815", onClick: () => onNavigate(Screen.NotificationSettings), rightComponent: _jsxs(_Fragment, { children: [_jsx("span", { className: "text-sm font-medium", children: "\uBAA8\uB450 \uD5C8\uC6A9" }), _jsx(ChevronRightIcon, { className: "w-4 h-4" })] }) }), _jsx(SettingItem, { icon: "\uD83C\uDF19", title: "\uB2E4\uD06C \uBAA8\uB4DC", rightComponent: _jsx(TossToggle, { value: darkMode, onToggle: () => setDarkMode(v => !v) }) })] }), _jsx(SectionContainer, { title: "\uB370\uC774\uD130 \uAD00\uB9AC", children: _jsx(SettingItem, { icon: "\uD83D\uDCE4", title: "\uB370\uC774\uD130 \uB0B4\uBCF4\uB0B4\uAE30", onClick: () => onNavigate(Screen.DataExport), rightComponent: _jsx(ChevronRightIcon, { className: "w-4 h-4" }) }) }), _jsxs(SectionContainer, { title: "\uACE0\uAC1D \uC9C0\uC6D0", children: [_jsx(SettingItem, { icon: "\u2753", title: "\uB3C4\uC6C0\uB9D0", onClick: () => { }, rightComponent: _jsx(ChevronRightIcon, { className: "w-4 h-4" }) }), _jsx(SettingItem, { icon: "\uD83D\uDCDE", title: "\uACE0\uAC1D\uC13C\uD130 \uBB38\uC758", onClick: () => { }, rightComponent: _jsx(ChevronRightIcon, { className: "w-4 h-4" }) }), _jsx(SettingItem, { icon: "\u2B50", title: "\uC571 \uD3C9\uAC00\uD558\uAE30", onClick: () => { }, rightComponent: _jsx(ChevronRightIcon, { className: "w-4 h-4" }) }), _jsx(SettingItem, { icon: "\uD83D\uDCC4", title: "\uBC84\uC804 \uC815\uBCF4", rightComponent: _jsx("span", { className: "text-sm font-medium", children: "v1.2.3" }) })] }), _jsxs(SectionContainer, { children: [_jsx(SettingItem, { icon: "\uD83D\uDEAA", title: "\uB85C\uADF8\uC544\uC6C3", ...(onLogout ? { onClick: onLogout } : {}), dangerous: true, rightComponent: _jsx(_Fragment, {}) }), _jsx(SettingItem, { icon: "\u274C", title: "\uD68C\uC6D0 \uD0C8\uD1F4", subtitle: "\uBAA8\uB4E0 \uB370\uC774\uD130\uAC00 \uC0AD\uC81C\uB429\uB2C8\uB2E4", onClick: () => onNavigate(Screen.DeleteAccount), dangerous: true, rightComponent: _jsx(_Fragment, {}) })] }), _jsx(SectionContainer, { title: "\uAC1C\uBC1C\uC790\uC6A9", className: "pb-4", children: _jsx(SettingItem, { icon: "\uD83C\uDFA8", title: "\uB514\uC790\uC778 \uAC00\uC774\uB4DC", onClick: () => onNavigate(Screen.DesignGuide), rightComponent: _jsx(ChevronRightIcon, { className: "w-4 h-4" }) }) })] })] }));
};
export { MyTabScreen };
export default MyTabScreen;
