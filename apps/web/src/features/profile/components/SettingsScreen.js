import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import { useState, useEffect } from 'react';
import { Screen } from '@qupid/core';
import { ArrowLeftIcon, ChevronRightIcon } from '@qupid/ui';
const TossToggle = ({ value, onToggle }) => (_jsx("button", { onClick: onToggle, className: `relative inline-flex items-center h-[30px] w-[50px] rounded-full transition-colors duration-300 ease-in-out focus:outline-none`, style: { backgroundColor: value ? '#F093B0' : '#E5E8EB' }, children: _jsx("span", { className: `inline-block w-[26px] h-[26px] transform bg-white rounded-full transition-transform duration-300 ease-in-out shadow-sm`, style: { transform: value ? 'translateX(22px)' : 'translateX(2px)' } }) }));
const SettingItem = ({ icon, title, subtitle, rightComponent, onClick, dangerous = false, isLast = false }) => (_jsxs("button", { onClick: onClick, className: `flex items-center w-full h-[56px] px-5 ${isLast ? '' : 'border-b border-[#F2F4F6]'}`, children: [_jsxs("div", { className: "flex items-center flex-1", children: [_jsx("span", { className: "text-2xl w-6 text-center", children: icon }), _jsxs("div", { className: "ml-4 text-left", children: [_jsx("p", { className: `text-base font-medium ${dangerous ? 'text-[var(--error-red)]' : 'text-[#191F28]'}`, children: title }), subtitle && _jsx("p", { className: "text-sm text-[#8B95A1]", children: subtitle })] })] }), _jsx("div", { className: "flex items-center space-x-2 text-[#8B95A1]", children: rightComponent })] }));
const SectionContainer = ({ title, children, className }) => (_jsxs("div", { className: `mt-4 ${className}`, children: [title && _jsx("h3", { className: "px-5 pb-1 text-lg font-bold text-[#191F28]", children: title }), _jsx("div", { className: "bg-white rounded-2xl border border-[#F2F4F6] overflow-hidden", children: children })] }));
const SettingsScreen = ({ onNavigate, onBack, onLogout }) => {
    // localStorage에서 사용자 정보 가져오기
    const storedProfile = localStorage.getItem('userProfile');
    const userProfile = storedProfile ? JSON.parse(storedProfile) : { name: '사용자', user_gender: 'female' };
    const [practiceNotification, setPracticeNotification] = useState(true);
    const [analysisDisplay, setAnalysisDisplay] = useState(true);
    const [darkMode, setDarkMode] = useState(false);
    const [soundEffects, setSoundEffects] = useState(true);
    const [hapticFeedback, setHapticFeedback] = useState(true);
    // 기본 대화 모드 설정
    const [defaultConversationMode, setDefaultConversationMode] = useState(() => {
        const saved = localStorage.getItem('defaultConversationMode');
        return saved || 'normal';
    });
    useEffect(() => {
        localStorage.setItem('defaultConversationMode', defaultConversationMode);
    }, [defaultConversationMode]);
    const initial = userProfile.name.charAt(0).toUpperCase();
    return (_jsxs("div", { className: "flex flex-col h-full w-full bg-[#F9FAFB]", children: [_jsxs("header", { className: "flex-shrink-0 flex items-center justify-between p-3 bg-white", children: [_jsx("button", { onClick: onBack, className: "p-2 rounded-full hover:bg-gray-100", children: _jsx(ArrowLeftIcon, { className: "w-6 h-6 text-[#191F28]" }) }), _jsx("h1", { className: "text-xl font-bold text-[#191F28]", children: "\uC124\uC815" }), _jsx("div", { className: "w-10" })] }), _jsxs("main", { className: "flex-1 overflow-y-auto p-4", children: [_jsxs("div", { className: "h-[120px] rounded-2xl p-5 flex items-center text-white", style: { background: 'linear-gradient(135deg, #FDF2F8, #EBF2FF)' }, children: [_jsx("div", { className: "w-16 h-16 rounded-full bg-[#F093B0] flex items-center justify-center text-white text-3xl font-bold", children: initial }), _jsxs("div", { className: "ml-4 flex-1", children: [_jsx("p", { className: "font-bold text-xl text-[#191F28]", children: userProfile.name }), _jsx("p", { className: "font-medium text-sm text-[#8B95A1]", children: "Level 3 \u00B7 \uB300\uD654 \uC911\uAE09\uC790" }), _jsx("div", { className: "mt-1.5 h-1 w-full bg-white/30 rounded-full", children: _jsx("div", { className: "h-1 rounded-full bg-[#F093B0]", style: { width: '75%' } }) })] }), _jsx("button", { onClick: () => onNavigate(Screen.ProfileEdit), className: "h-8 px-4 rounded-lg bg-white/20 border border-white/30 text-[#4F7ABA] text-sm font-bold", children: "\uD3B8\uC9D1" })] }), _jsxs(SectionContainer, { children: [_jsx(SettingItem, { icon: "\uD83D\uDCDA", title: "\uD559\uC2B5 \uBAA9\uD45C \uC124\uC815", onClick: () => onNavigate(Screen.LearningGoals), rightComponent: _jsxs(_Fragment, { children: [_jsx("span", { className: "text-base font-medium", children: "\uC77C 3\uD68C \uB300\uD654" }), _jsx(ChevronRightIcon, { className: "w-4 h-4" })] }) }), _jsx(SettingItem, { icon: "\uD83C\uDFAF", title: "\uAD00\uC2EC \uBD84\uC57C \uC218\uC815", onClick: () => onNavigate(Screen.ProfileEdit), rightComponent: _jsxs(_Fragment, { children: [_jsx("span", { className: "text-base font-medium", children: "\uAC8C\uC784, \uC601\uD654 \uC678 3\uAC1C" }), _jsx(ChevronRightIcon, { className: "w-4 h-4" })] }) }), _jsx(SettingItem, { icon: "\u23F0", title: "\uC5F0\uC2B5 \uC2DC\uAC04 \uC54C\uB9BC", onClick: () => { }, rightComponent: _jsx(TossToggle, { value: practiceNotification, onToggle: () => setPracticeNotification(v => !v) }) }), _jsx(SettingItem, { icon: "\uD83D\uDCCA", title: "\uC2E4\uC2DC\uAC04 \uBD84\uC11D \uD45C\uC2DC", onClick: () => { }, rightComponent: _jsx(TossToggle, { value: analysisDisplay, onToggle: () => setAnalysisDisplay(v => !v) }) }), _jsx(SettingItem, { icon: "\uD83D\uDCAC", title: "\uAE30\uBCF8 \uB300\uD654 \uBAA8\uB4DC", subtitle: defaultConversationMode === 'normal' ? '친구처럼 편안한 대화' : '연인처럼 애정 어린 대화', onClick: () => setDefaultConversationMode(defaultConversationMode === 'normal' ? 'romantic' : 'normal'), rightComponent: _jsxs("div", { className: "flex items-center gap-2", children: [_jsx("span", { className: `text-base font-medium ${defaultConversationMode === 'normal' ? 'text-[#0AC5A8]' : 'text-[#F093B0]'}`, children: defaultConversationMode === 'normal' ? '👋 일반 모드' : '💕 연인 모드' }), _jsx(ChevronRightIcon, { className: "w-4 h-4" })] }), isLast: true })] }), _jsxs(SectionContainer, { title: "\uAC1C\uC778 \uC815\uBCF4", children: [_jsx(SettingItem, { icon: "\uD83D\uDC64", title: "\uD504\uB85C\uD544 \uC218\uC815", onClick: () => onNavigate(Screen.ProfileEdit), rightComponent: _jsx(ChevronRightIcon, { className: "w-4 h-4" }) }), _jsx(SettingItem, { icon: "\uD83D\uDEBB", title: "\uC131\uBCC4 \uBCC0\uACBD", onClick: () => { }, rightComponent: _jsxs(_Fragment, { children: [_jsx("span", { className: "text-base font-medium", children: userProfile.user_gender === 'male' ? '남성' : '여성' }), _jsx(ChevronRightIcon, { className: "w-4 h-4" })] }) }), _jsx(SettingItem, { icon: "\uD83D\uDCDD", title: "\uCD08\uAE30 \uC124\uBB38 \uB2E4\uC2DC\uD558\uAE30", onClick: () => { }, rightComponent: _jsx(ChevronRightIcon, { className: "w-4 h-4" }) }), _jsx(SettingItem, { icon: "\uD83D\uDD10", title: "\uAC1C\uC778\uC815\uBCF4 \uCC98\uB9AC\uBC29\uCE68", onClick: () => { }, rightComponent: _jsx(ChevronRightIcon, { className: "w-4 h-4" }), isLast: true })] }), _jsxs(SectionContainer, { title: "\uC571 \uC124\uC815", children: [_jsx(SettingItem, { icon: "\uD83D\uDD14", title: "\uC54C\uB9BC \uC124\uC815", onClick: () => onNavigate(Screen.NotificationSettings), rightComponent: _jsxs(_Fragment, { children: [_jsx("span", { className: "text-base font-medium", children: "\uBAA8\uB450 \uD5C8\uC6A9" }), _jsx(ChevronRightIcon, { className: "w-4 h-4" })] }) }), _jsx(SettingItem, { icon: "\uD83C\uDF19", title: "\uB2E4\uD06C \uBAA8\uB4DC", onClick: () => { }, rightComponent: _jsx(TossToggle, { value: darkMode, onToggle: () => setDarkMode(v => !v) }) }), _jsx(SettingItem, { icon: "\uD83D\uDD0A", title: "\uC0AC\uC6B4\uB4DC \uD6A8\uACFC", onClick: () => { }, rightComponent: _jsx(TossToggle, { value: soundEffects, onToggle: () => setSoundEffects(v => !v) }) }), _jsx(SettingItem, { icon: "\uD83D\uDCF1", title: "\uD585\uD2F1 \uD53C\uB4DC\uBC31", onClick: () => { }, rightComponent: _jsx(TossToggle, { value: hapticFeedback, onToggle: () => setHapticFeedback(v => !v) }) }), _jsx(SettingItem, { icon: "\uD83C\uDF10", title: "\uC5B8\uC5B4 \uC124\uC815", onClick: () => { }, rightComponent: _jsxs(_Fragment, { children: [_jsx("span", { className: "text-base font-medium", children: "\uD55C\uAD6D\uC5B4" }), _jsx(ChevronRightIcon, { className: "w-4 h-4" })] }), isLast: true })] }), _jsxs(SectionContainer, { title: "\uB370\uC774\uD130 \uAD00\uB9AC", children: [_jsx(SettingItem, { icon: "\uD83D\uDCC8", title: "\uB0B4 \uB370\uC774\uD130 \uBCF4\uAE30", subtitle: "\uB300\uD654 \uAE30\uB85D, \uBD84\uC11D \uACB0\uACFC \uB4F1", onClick: () => { }, rightComponent: _jsx(ChevronRightIcon, { className: "w-4 h-4" }) }), _jsx(SettingItem, { icon: "\uD83D\uDCE4", title: "\uB370\uC774\uD130 \uB0B4\uBCF4\uB0B4\uAE30", subtitle: "Excel, PDF\uB85C \uB2E4\uC6B4\uB85C\uB4DC", onClick: () => onNavigate(Screen.DataExport), rightComponent: _jsx(ChevronRightIcon, { className: "w-4 h-4" }) }), _jsx(SettingItem, { icon: "\uD83D\uDDD1\uFE0F", title: "\uB300\uD654 \uAE30\uB85D \uC0AD\uC81C", subtitle: "\uC120\uD0DD\uC801 \uB610\uB294 \uC804\uCCB4 \uC0AD\uC81C", onClick: () => { }, rightComponent: _jsx(ChevronRightIcon, { className: "w-4 h-4" }) }), _jsx(SettingItem, { icon: "\u2601\uFE0F", title: "\uBC31\uC5C5 \uC124\uC815", onClick: () => { }, rightComponent: _jsxs(_Fragment, { children: [_jsx("span", { className: "text-base font-medium", children: "\uC790\uB3D9 \uBC31\uC5C5 ON" }), _jsx(ChevronRightIcon, { className: "w-4 h-4" })] }), isLast: true })] }), _jsxs(SectionContainer, { title: "\uACE0\uAC1D \uC9C0\uC6D0", children: [_jsx(SettingItem, { icon: "\u2753", title: "\uB3C4\uC6C0\uB9D0", onClick: () => { }, rightComponent: _jsx(ChevronRightIcon, { className: "w-4 h-4" }) }), _jsx(SettingItem, { icon: "\uD83D\uDCDE", title: "\uACE0\uAC1D\uC13C\uD130 \uBB38\uC758", onClick: () => { }, rightComponent: _jsx(ChevronRightIcon, { className: "w-4 h-4" }) }), _jsx(SettingItem, { icon: "\u2B50", title: "\uC571 \uD3C9\uAC00\uD558\uAE30", onClick: () => { }, rightComponent: _jsx(ChevronRightIcon, { className: "w-4 h-4" }) }), _jsx(SettingItem, { icon: "\uD83D\uDCC4", title: "\uBC84\uC804 \uC815\uBCF4", onClick: () => { }, rightComponent: _jsx("span", { className: "text-base font-medium", children: "v1.2.3" }), isLast: true })] }), _jsx("div", { className: "mt-8", children: _jsxs(SectionContainer, { children: [_jsx(SettingItem, { icon: "\uD83D\uDEAA", title: "\uB85C\uADF8\uC544\uC6C3", onClick: () => {
                                        if (onLogout) {
                                            onLogout();
                                        }
                                        else {
                                            // 기본 로그아웃 처리
                                            localStorage.removeItem('authToken');
                                            localStorage.removeItem('refreshToken');
                                            localStorage.removeItem('userId');
                                            localStorage.removeItem('userProfile');
                                            window.location.href = '/';
                                        }
                                    }, dangerous: true, rightComponent: _jsx(ChevronRightIcon, { className: "w-4 h-4" }) }), _jsx(SettingItem, { icon: "\u274C", title: "\uD68C\uC6D0 \uD0C8\uD1F4", subtitle: "\uBAA8\uB4E0 \uB370\uC774\uD130\uAC00 \uC0AD\uC81C\uB429\uB2C8\uB2E4", onClick: () => onNavigate(Screen.DeleteAccount), dangerous: true, rightComponent: _jsx(ChevronRightIcon, { className: "w-4 h-4" }), isLast: true })] }) })] })] }));
};
export { SettingsScreen };
export default SettingsScreen;
